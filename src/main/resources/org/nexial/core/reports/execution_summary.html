<html xmlns="http://www.w3.org/1999/html" xmlns:th="http://www.thymeleaf.org">
<head>
    <script>
        var loadErrorFound = false;
        function externalResourceNotFound() {
            if (!loadErrorFound) {
                window.alert("Unable to load one or more external web resources needed to display this page.\n\n" +
                             "Please check/adjust your Internet access and reload this page again.\n\n" +
                             "Thank you.");
                loadErrorFound = true;
            }
            return false;
        }
    </script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css" onerror="externalResourceNotFound()"/>
    <link rel="stylesheet" href="https://nexiality.github.io/documentation/assets/report/execution_summary.css" onerror="externalResourceNotFound()"/>
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.5.0.min.js" onerror="externalResourceNotFound()"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js" onerror="externalResourceNotFound()"></script>
    <script src="https://nexiality.github.io/documentation/assets/report/execution_summary.js" onerror="externalResourceNotFound()"></script>
    <script src="https://nexiality.github.io/documentation/assets/report/execution_output.js" onerror="externalResourceNotFound()"></script>
</head>
<body>
<div class="title">
    Execution Summary for <span data-th-utext="${summary.name}">PROJECT_PLAN_WITH_RUNID</span>
</div>

<div class="result-controls">
    <i class="fas fa-toggle-on on" id="script-toggle" onclick="toggleScript(this)" title="toggle the display of only scripts"><span>Scripts</span></i>
    <i class="fas fa-toggle-on on" id="iteration-toggle" onclick="toggleIteration(this)" title="toggle the display of iterations"><span>Iterations</span></i>
    <i class="fas fa-toggle-on on" id="scenario-toggle" onclick="toggleScenario(this)" title="toggle the display of scenarios"><span>Scenarios</span></i>
    <i class="fas fa-toggle-on on" id="activity-toggle" onclick="toggleActivity(this)" title="toggle the display of activities"><span>Activities</span></i>
    <i class="fas fa-toggle-on on" id="reference-toggle" onclick="toggleRefs(this);" title="toggle the display of script/scenario references"><span>References</span></i>
    <i class="fas fa-toggle-on on" id="timing-toggle" onclick="toggleTimings(this);" title="toggle the display of execution time"><span>Timing</span></i>
    <i class="fas fa-toggle-on on" id="passfail-toggle" onclick="togglePassFail(this);" title="toggle the display of PASS/FAIL"><span>PASS/FAIL</span></i>
    &nbsp;|&nbsp;&nbsp;
    <i class="fas fa-exclamation-circle off" id="failure-toggle" onclick="collapsePassRows(this);"><span>Failures</span></i>
    <i class="fas fa-check-circle on" id="all-toggle" onclick="showPassRows(this);"><span>All Results</span></i>
    &nbsp;|&nbsp;&nbsp;
    <i class="fas fa-compress on" id="collapse-toggle" onclick="toggleExpansion(this)" title="collapse/expand all sections"><span>Collapse/Expand All</span></i>
</div>

<th:block data-th-if="${summary.customHeader}">
    <div class="custom-header" data-th-utext="${summary.customHeader}">
        Special <a href="https://nexiality.github.io/documentation/">data file</a>.<br/>
        The number of transaction completed is <b>15</b>
    </div>
</th:block>

<div class="execMeta canHide">
    <div class="showhide" target="execMeta">
        <i class="fas fa-minus-square" onclick="hideSection(this)" title="minimize this section"></i>
        <i class="fas fa-plus-square" onclick="showSection(this)" title="restore this section"></i>
    </div>

    <div id="execMeta" class="parent">
        <div class="meta">
            <table class="execMeta" cellpadding="0" cellspacing="0" style="width: 100%">
                <tbody>
                    <tr>
                        <td class="section-header section-env" width="10%"><i class="fas fa-laptop-code"></i></td>
                        <td class="section-detail detail-env">
                            <div class="execValue">
                                <div class="execLabel">run from</div>
                                <div class="content" style="text-align:left; margin-top:-5px;" data-th-utext="${execution.get('run from')}">HOSTNAME (HOST OS)</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">run user</div>
                                <div class="content" data-th-utext="${execution.get('run user')}">USER_NAME</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">nexial version</div>
                                <div class="content" data-th-utext="${execution.get('nexial version')}">Nexial 1.8.162</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">java version</div>
                                <div class="content" data-th-utext="${execution.get('java version')}">1.8.0_181</div>
                            </div>
                            <th:block data-th-if="${execution.get('JENKINS::build url')}">
                                <div class="execValue execValue_JENKINS">
                                    <div class="execLabel">jenkins</div>
                                    <div class="content">
                                        <a href="about:blank" th:href="${execution.get('JENKINS::build url')}" target="_nexial_jenkins">
                                            #
                                            <th:block data-th-utext="${execution.get('JENKINS::build number')}">1234</th:block>
                                            by
                                            <th:block data-th-utext="${execution.get('JENKINS::build user')}">somebody</th:block>
                                        </a>
                                    </div>
                                </div>
                            </th:block>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="1" class="section-header section-time"><i class="fas fa-clock"></i></td>
                        <td class="section-detail detail-time">
                            <div class="execValue">
                                <div class="execLabel">starts on</div>
                                <div class="content" data-th-utext="${execution.get('start time')}">10/30/2018 01:31:39</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">ends on</div>
                                <div class="content" data-th-utext="${execution.get('end time')}">10/30/2018 01:31:39</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">duration</div>
                                <div class="content" data-th-utext="${execution.get('duration')}">00:01:29.693</div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="section-header section-exec"><i class="fas fa-cogs"></i></td>
                        <td class="section-detail detail-exec">
                            <div class="execValue">
                                <div class="execLabel">Scenario Passed</div>
                                <div class="content" data-th-utext="${execution.get('scenario passed')}">4 / 5</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">Total Steps</div>
                                <div class="content" data-th-utext="${execution.get('total steps')}">94</div>
                            </div>
                            <div class="execValue">
                                <div class="execLabel">Executed Steps</div>
                                <div class="content" data-th-utext="${execution.get('executed steps')}">96 (102.13%)</div>
                            </div>
                            <div class="execValue execValuePass">
                                <div class="execLabel">Passed</div>
                                <div class="content" data-th-utext="${execution.get('passed')}">95 (101.06%)</div>
                            </div>
                            <div class="execValue" data-th-attrappend="class=${execution.get('executed steps') == execution.get('passed') ? '' : ' execValueFail'}">
                                <div class="execLabel">Failed</div>
                                <div class="content" data-th-utext="${execution.get('failed')}">1 (1.06%)</div>
                            </div>
                            <div class="execValue execValueSkipped">
                                <div class="execLabel">Skipped</div>
                                <div class="content" data-th-utext="${execution.get('skipped')}">96 (102.13%)</div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td rowspan="2" class="section-header section-ref"><i class="fas fa-file-invoice"></i></td>
                        <td class="section-detail detail-ref">
                            <div class="execValue exec-supplemental">
                                <div class="execLabel">Analysis</div>
                                <div class="links">
                                    <th:block data-th-if="${hasSupplemental}">
                                        <th:block data-th-if="${screenRecordings}"><a href="#recordings" class="supplemental-link">Screen Recordings</a></th:block>
                                        <th:block data-th-if="${wsLogs}"><a href="#wsLogs" class="supplemental-link">Web Service/API</a></th:block>
                                    </th:block>
                                    <th:block data-th-unless="${hasSupplemental}">
                                        Learn more about
                                        <a href="https://nexiality.github.io/documentation/userguide/ImprovingExecutionReport.html">
                                            Post-Execution Analysis
                                        </a>
                                    </th:block>
                                    <th:block data-th-if="${browser_metrics_html}"><a data-th-href="${browser_metrics_html}">Browser Metrics</a></th:block>
                                </div>
                            </div>
                            <div class="execValue execLog">
                                <div class="execLabel">Logs</div>
                                <th:block data-th-if="#{logs}" data-th-each="log : ${logs}"><a data-th-href="${log.value}" target="_nexial_link" data-th-utext="${log.key}">log file</a><br/></th:block>
                            </div>
                            <div class="execValue execArgs" data-th-if="${execution.get('runtime args')}">
                                <div class="execLabel">Runtime Args</div>
                                <pre data-th-utext="${execution.get('runtime args')}">-plan C:\projects\demos\notes\artifact\plan\notes-plan.xlsx</pre>
                            </div>
                            <div class="execValue execArgs" data-th-if="${execution.get('JAVA_OPT')}">
                                <div class="execLabel">JAVA_OPT</div>
                                <pre data-th-utext="${execution.get('JAVA_OPT')}">-Dnexial.generateOutput=TRUE -Dnexial.outputToCloud=TRUE</pre>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="chart">
            <div class="chart-container">
                <table cellspacing="0" cellpadding="5" border="0" width="100%">
                <tbody>
                <tr>
                    <td width="35%"><canvas id="resultsChart"></canvas></td>
                </tr>
                </tbody>
                </table>
            </div>
            <div class="reset-buttons">
                <span id="chartInstruction">click on the chart above to drill down</span>
                <button id="resetResultsChart">Execution</button>&nbsp;&nbsp;
                <button id="rollUpResultsChart">Back</button>
            </div>
        </div>
    </div>
</div>

<div data-th-if="${summary.error}">
    <div class="errorSection">
        <span class="errorPrompt">Test(s) did not complete due to fatal error:</span>
        <b data-th-utext="${summary.error.message}">Exception</b>
        <br/>
        <pre class="errorStackTrace" data-th-utext="${summary.errorStackTrace}">stack trace goes here...</pre>
        <span class="errorPrompt">Check log file for more details</span>
    </div>
    <br/>
</div>


<div class="exec-summary" data-th-if="#{summary.nestedExecutions}" data-th-each="script,scriptStat : ${summary.nestedExecutions}"
     data-th-with="showPlan=${script.showPlan(summary, scriptStat.index)}">

    <div class="value value-plan" data-th-if="${showPlan}">
        <b>PLAN:</b>
        <a data-th-href="${script.planFile}"
           data-th-attr="title=${script.planFile}"
           data-th-with="planFileName=${@org.nexial.commons.utils.FileUtil@extractFilename(script.planFile)}"
           data-th-utext="${planFileName + '/' + script.planName}">Plan Name</a>
    </div>

    <div class="exec-summary-header" data-th-if="${scriptStat.first or showPlan}">
        <table cellspacing="0" cellpadding="5" border="0" width="100%">
            <tr>
                <th class="label label-title">Script</th>
                <th class="label label-title">Data</th>
                <th class="label label-iteration">Iterations</th>
                <th class="label label-scenarioPassed">Scenario Passed</th>
                <th class="label label-datetime exectime">Start Date/Time</th>
                <th class="label label-time exectime">Duration</th>
                <th class="label label-num passfail">Total</th>
                <th class="label label-num passfail">Pass</th>
                <th class="label label-num passfail">Fail</th>
                <th class="label label-percent passfail" width="100%">Success %</th>
            </tr>
        </table>
    </div>
    <div class="planStep canHide" data-th-id="'planStep' + ${scriptStat.count}" >
        <div class="showhide" data-th-attr="target='planStep' + ${scriptStat.count} + 'details'" data-th-if="#{script.nestedExecutions}">
            <i class="fas fa-minus-square" onclick="hideSection(this)" title="minimize this section"></i>
            <i class="fas fa-plus-square" onclick="showSection(this)" title="restore this section"></i>
        </div>

        <div class="plan-step-summary">
            <table cellspacing="0" cellpadding="5" border="0">
                <tr data-th-class="${script.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                    <td class="value value-title" data-th-with="scriptFileName=${@org.nexial.commons.utils.FileUtil@extractFilename(script.scriptFile)}" title="Click to download script">
                        <a class="fileLink" data-th-href="${script.scriptFile}" data-th-utext="${scriptFileName}">myscript.xlsx</a>
                        <i class="fas fa-copy" data-th-attr="onclick=|copyToClipboard('${#strings.escapeJava(script.scriptFile)}')|" title="copy script location"></i>
                    </td>
                    <td class="value value-title" data-th-with="dataPath=${script.resolveDataFile()},dataFileName=${@org.nexial.commons.utils.FileUtil@extractFilename(dataPath)}" title="Click to download data">
                        <a class="fileLink" data-th-href="${dataPath}" data-th-utext="${dataFileName}">myscript.data.xlsx</a>
                        <i class="fas fa-copy" data-th-attr="onclick=|copyToClipboard('${#strings.escapeJava(dataPath)}')|" title="copy data file location"></i>
                    </td>
                    <td class="value value-iteration" data-th-utext="${script.nestedExecutions.size()}">1234</td>
                    <td class="value value-scenarioPassed" data-th-utext="${script.resolveTotalScenariosPassed()}">1 / 2</td>
                    <td class="value value-datetime exectime" data-th-with="formattedStartTime=${@org.nexial.commons.utils.DateUtility@format(script.startTime, 'yyyy/MM/dd HH:mm:ss')}" data-th-utext="${formattedStartTime}">2018/12/16 12:53:21</td>
                    <td class="value value-time value-tally exectime" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (script.endTime - script.startTime)), 'HH:mm:ss')}">00:42:11</td>
                    <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(script.totalSteps, 1, 'DEFAULT')}">23456</td>
                    <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(script.passCount, 1, 'DEFAULT')}">12345</td>
                    <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(script.failCount, 1, 'DEFAULT')}">1001</td>
                    <td class="value value-percent value-tally passfail" data-th-attrappend="class=${script.passCount == script.executed ? ' allPass' : ' hasFailure'}"
                        data-th-with="success=${script.executed == 0 ? 0.00 : (script.passCount * 1.0 / script.executed) * 100}"
                        data-th-utext="${#numbers.formatDecimal(success, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                </tr>
            </table>
        </div>

        <div class="iteration canHide" data-th-attr="id='planStep' + ${scriptStat.count} + 'details'" data-th-if="#{script.nestedExecutions}">
            <table cellspacing="0" cellpadding="5" border="0">
                <tr class="record-header">
                    <th class="label label-title">Iteration</th>
                    <th class="label label-title">Scenario</th>
                    <th class="label label-title">Activity</th>
                    <th class="label label-scenarioPassed"></th>
                    <th class="label label-datetime exectime">Start Date/Time</th>
                    <th class="label label-time exectime">Duration</th>
                    <th class="label label-num passfail">Total</th>
                    <th class="label label-num passfail">Pass</th>
                    <th class="label label-num passfail">Fail</th>
                    <th class="label label-num passfail">Success %</th>
                    <th class="label">&nbsp;</th>
                </tr>

                <th:block data-th-if="${script.nestedExecutions}" data-th-each="iteration : ${script.nestedExecutions}">
                    <tr data-th-class="'record iter ' + ${iteration.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                        <td colspan="3" class="value value-title" data-th-with="referenceData=${@org.nexial.commons.utils.CollectionUtil@removeEmptyEntries(iteration.referenceData)}">
                            <a data-th-class="fileLink" title="Click to download result" target="_nexial_link" data-th-id="${iteration.testScript.name}" data-th-href="${iteration.testScriptLink}" data-th-utext="${'Execution Result (' + iteration.name + ')'}">myscript.001.xlsx</a>
                            <i class="fas fa-copy" data-th-attr="onclick=|copyToClipboard('${#strings.escapeJava(iteration.testScriptLink)}')|" title="copy execution result file location"></i>
                            <div class="value-scriptRef" data-th-if="${referenceData.size() > 0}">
                                <i class="fas fa-info-circle info" title="Reference Data labeled as nexial.scriptRef.*"></i>
                                <table cellspacing="0" cellpadding="0">
                                    <th:block data-th-each="data : ${referenceData}">
                                        <th:block data-th-if="${data.key != 'JAVA_OPT' and data.key != 'runtime args' and data.key != 'Data File'}">
                                            <tr>
                                                <td class="label-ref" data-th-attr="title=${data.key}" data-th-utext="${data.key}">Tax Year</td>
                                                <td class="value-ref" data-th-attr="title=${data.value}" data-th-utext="${data.value}">2018</td>
                                            </tr>
                                        </th:block>
                                    </th:block>
                                </table>
                            </div>
                        </td>
                        <td class="value value-scenarioPassed" data-th-utext="${iteration.totalLevelPassed + ' / ' + iteration.nestedExecutions.size()}">1 / 2</td>
                        <td class="value value-datetime exectime" data-th-with="formattedStartTime=${@org.nexial.commons.utils.DateUtility@format(iteration.startTime, 'yyyy/MM/dd HH:mm:ss')}" data-th-utext="${formattedStartTime}">2018/12/16 12:53:21</td>
                        <td class="value value-time value-tally exectime" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (iteration.endTime - iteration.startTime)), 'HH:mm:ss')}">00:42:11</td>
                        <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(iteration.executed, 1, 'DEFAULT')}">23456</td>
                        <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(iteration.passCount, 1, 'DEFAULT')}">12345</td>
                        <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(iteration.failCount, 1, 'DEFAULT')}">10001</td>
                        <td class="value value-percent value-tally passfail" data-th-attrappend="class=${iteration.passCount == iteration.executed ? ' allPass' : ' hasFailure'}"
                            data-th-with="success=${iteration.executed == 0 ? 0.00 : (iteration.passCount * 1.0 / iteration.executed) * 100}"
                            data-th-utext="${#numbers.formatDecimal(success, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                    </tr>

                    <th:block data-th-if="${iteration.nestedExecutions}" data-th-each="scenario : ${iteration.nestedExecutions}">
                        <tr data-th-class="'record scenario ' + ${scenario.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                            <td class="value spacer2">&nbsp;</td>
                            <td colspan="3" class="value value-title" data-th-attr="title=${scenario.name}" data-th-with="referenceData=${@org.nexial.commons.utils.CollectionUtil@removeEmptyEntries(scenario.referenceData)}">
                                <th:block data-th-utext="${scenario.name}">Scenario 123.7</th:block>
                                <div class="value-scenarioRef" data-th-if="${referenceData.size() > 0}">
                                    <i class="fas fa-info-circle info" title="Reference Data labeled as nexial.scenarioRef.*"></i>
                                    <table cellspacing="0" cellpadding="0">
                                        <th:block data-th-each="data : ${referenceData}">
                                            <tr>
                                                <td class="label-ref" data-th-attr="title=${data.key}" data-th-utext="${data.key}">Tax Year</td>
                                                <td class="value-ref" data-th-attr="title=${data.value}" data-th-utext="${data.value}">2018</td>
                                            </tr>
                                        </th:block>
                                    </table>
                                </div>
                            </td>
                            <td class="value value-datetime exectime" data-th-with="formattedStartTime=${@org.nexial.commons.utils.DateUtility@format(scenario.startTime, 'yyyy/MM/dd HH:mm:ss')}" data-th-utext="${formattedStartTime}">2018/12/16 12:53:21</td>
                            <td class="value value-time value-tally exectime" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (scenario.endTime - scenario.startTime)), 'HH:mm:ss')}">00:42:11</td>
                            <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(scenario.executed, 1, 'DEFAULT')}">23456</td>
                            <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(scenario.passCount, 1, 'DEFAULT')}">12345</td>
                            <td class="value value-num value-tally passfail" data-th-utext="${#numbers.formatInteger(scenario.failCount, 1, 'DEFAULT')}">10001</td>
                            <td class="value value-percent value-tally passfail" data-th-attrappend="class=${scenario.passCount == scenario.executed ? ' allPass' : ' hasFailure'}"
                                data-th-with="success=${scenario.executed == 0 ? 0.00 : (scenario.passCount * 1.0 / scenario.executed) * 100}"
                                data-th-utext="${#numbers.formatDecimal(success, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                        </tr>

                        <th:block data-th-if="${scenario.nestedExecutions}" data-th-each="activity : ${scenario.nestedExecutions}">
                            <tr data-th-class="'record activity ' + ${activity.failCount > 0 ? 'hasFailure' : 'noFailure'}">
                                <td colspan="2" class="value spacer2"></td>
                                <td colspan="2" class="value value-title">
                                    <div class="step-icon-grid" data-th-if="not ${#lists.isEmpty(activity.getStepDetails())}">
                                        <div data-th-attr="title=${activity.name}" data-th-utext="${activity.name}">Act 1</div>
                                        <div><i class="fa execution-error-icon" data-th-if="${activity.isStepDetailsHasError()}" onclick="toggleStepErrors(this)" title="View Errors"></i>&nbsp;</div>
                                        <div><i class="fa execution-screenshot-icon" data-th-if="${activity.isStepDetailsHasLinks()}" onclick="toggleStepFiles(this)" title="View Screenshots/Files"></i></div>
                                    </div>
                                    <div data-th-if="${#lists.isEmpty(activity.getStepDetails())}"><span data-th-attr="title=${activity.name}" data-th-utext="${activity.name}">Act 1</span></div>
                                </td>
                                <td class="value value-datetime exectime" data-th-with="formattedStartTime=${@org.nexial.commons.utils.DateUtility@format(activity.startTime, 'yyyy/MM/dd HH:mm:ss')}" data-th-utext="${formattedStartTime}">2018/12/16 12:53:21</td>
                                <td class="value value-time exectime" data-th-utext="${#dates.format(#dates.create(0,0,0,0,0,0, (activity.endTime - activity.startTime)), 'HH:mm:ss')}">00:42:11</td>
                                <td class="value value-num passfail" data-th-utext="${#numbers.formatInteger(activity.executed, 1, 'DEFAULT')}">23456</td>
                                <td class="value value-num passfail" data-th-utext="${#numbers.formatInteger(activity.passCount, 1, 'DEFAULT')}">12345</td>
                                <td class="value value-num passfail" data-th-utext="${#numbers.formatInteger(activity.failCount, 1, 'DEFAULT')}">10001</td>
                                <td class="value value-percent passfail" data-th-attrappend="class=${activity.passCount == activity.executed ? ' allPass' : ' hasFailure'}"
                                    data-th-with="success=${activity.executed == 0 ? 0.00 : (activity.passCount * 1.0 / activity.executed) * 100}"
                                    data-th-utext="${#numbers.formatDecimal(success, 1, 2, 'DEFAULT')} + '%'">98.12%</td>
                            </tr>
                            <tr class="record canHide step-detail-row" th:with="nestedMessages=${activity.stepDetails}" >
                                <td class="spacer2"></td>
                                <td class="spacer2"></td>
                                <td colspan="8">
                                    <table cellspacing="0" cellpadding="5" style="width:100%">
                                        <th:block data-th-if="${nestedMessages}" data-th-each="messages : ${nestedMessages}" >
                                            <tr class="record step-detail-tr" data-th-attr="is-step-error=${not messages.isPass}" data-th-each="messageMap, msgMapIdx : ${messages.nestedMessages}">
                                                <td class="value step-table-col-width-5" style="text-align: right"  data-th-utext="${messages.rowNum}"
                                                    data-th-if="${msgMapIdx.index == 0}" data-th-attr="rowspan=${#lists.size(messages.nestedMessages)}">Step No.</td>
                                                <td class="value step-table-col-width-45" data-th-title="${messages.description}" data-th-utext="${#strings.abbreviate(messages.description, 100)}"
                                                    data-th-if="${msgMapIdx.index == 0}" data-th-attr="rowspan=${#lists.size(messages.nestedMessages)}">description
                                                </td>
                                                <td class="value step-table-col-width-45" data-th-classappend="${messages.isPass} ? '' : 'hasFailure'">
                                                    <span data-th-title="${messageMap.message}" data-th-utext="${#strings.abbreviate(messageMap.message, 200)}"></span>
                                                </td>
                                                <td class="value step-table-col-width-5" data-th-classappend="${messages.isPass} ? '' : 'hasFailure'">
                                                    <a data-th-if="not ${#strings.isEmpty(messageMap.file)}" target="_nexial_target" data-th-href="${messageMap.file}">
                                                        <i class="fas" data-th-classappend="'file-'+${messageMap.fileType}+'-icon'" data-th-title="'View File'"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </th:block>
                                    </table>
                                </td>
                            </tr>
                        </th:block>
                    </th:block>
                </th:block>
            </table>
        </div>
    </div>
</div>

<div class="recording canHide" id="recordings" data-th-if="${screenRecordings}">
    <div class="showhide" target="all-recordings">
        <i class="fas fa-minus-square" onclick="hideSection(this)" title="minimize this section"></i>
        <i class="fas fa-plus-square" onclick="showSection(this)" title="restore this section"></i>
    </div>

    <div class="section-title">
        Screen Recordings
        <a href="#top" class="top-link"><i class="fas fa-chevron-up"></i></a>
    </div>

    <div class="canHide" id="all-recordings">
        <th:block data-th-each="screenRecordingSet : ${screenRecordings}">
            <div class="container">
                <div class="caption">
                    <div class="caption-title" data-th-utext="${screenRecordingSet.value.file}">video.mp4</div>
                    <div class="caption-meta">
                        <a class="link-to-result" data-th-href="${'javascript:scrollToElement(\'[id=\\\'' + screenRecordingSet.value.filename + '.xlsx\\\']\');'}" title="navigate to corresponding execution result"><i class="fas fa-link"></i></a>
                        <span class="meta-title">script</span>
                        <span class="meta-value" data-th-utext="${screenRecordingSet.value.script}">EmployeesTemp</span>
                        <span class="meta-title">scenario</span>
                        <span class="meta-value" data-th-utext="${screenRecordingSet.value.scenario}">login</span>
                        <span class="meta-title">iteration</span>
                        <span class="meta-value" data-th-utext="${screenRecordingSet.value.iteration}">001</span>
                        <span class="meta-title">row</span>
                        <span class="meta-value" data-th-utext="${screenRecordingSet.value.row}">A5</span>
                    </div>
                </div>
                <video width="540" controls>
                    <source data-th-src="${screenRecordingSet.key}" src="captures/Script.20211007_022758.001.xlsx_Scenario_A5.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </th:block>
    </div>
</div>

<div class="wsLogs canHide" id="wsLogs" data-th-if="${wsLogs}">
    <div class="showhide" target="all-wsLogs">
        <i class="fas fa-minus-square" onclick="hideSection(this)" title="minimize this section"></i>
        <i class="fas fa-plus-square" onclick="showSection(this)" title="restore this section"></i>
    </div>

    <div class="section-title">
        Web Service/API
        <a href="#top" class="top-link"><i class="fas fa-chevron-up"></i></a>
    </div>

    <div class="canHide" id="all-wsLogs">
        <div class="summary-container" data-th-if="${wsLogs.summary}" data-th-with="wsSummary=${wsLogs.summary}">
            <div class="caption">
                <a data-th-href="${'logs/' + wsSummary.filename}"
                   class="caption-title"
                   data-th-utext="${'<i class=\'fas fa-file-download\'></i>' + wsSummary.filename}"
                   target="_blank"
                   title="click to download this log">nexial-ws-20211006_123456.log</a>
                <div class="caption-meta">
                    <span class="meta-title">calls</span>
                    <span class="meta-value" data-th-utext="${wsSummary.total}">1</span>
                    <span class="meta-title" title="Time-to-First-Byte">ttfb (min/max/avg)</span>
                    <span class="meta-value" data-th-utext="${wsSummary.ttfbMin + ' / ' + wsSummary.ttfbMax + ' / ' + wsSummary.ttfbAverage}">0 / 0 / 0</span>
                    <span class="meta-title">elapsed Time (min/max/avg)</span>
                    <span class="meta-value" data-th-utext="${wsSummary.elapsedMin + ' / ' + wsSummary.elapsedMax + ' / ' + wsSummary.elapsedAverage}">0 / 0 / 0</span>
                    <span class="meta-title">response length (min/max/avg)</span>
                    <span class="meta-value" data-th-utext="${wsSummary.responseLengthMin + ' / ' + wsSummary.responseLengthMax + ' / ' + wsSummary.responseLengthAverage}">A5</span>
                </div>
            </div>

            <table id="wsSummaryTable" class="cell-border compact hover">
                <thead>
                <tr>
                    <th title="request date/time">req time</th>
                    <th>output</th>
                    <th>scenario</th>
                    <th>row</th>
                    <th>url</th>
                    <th>method</th>
                    <th title="request body length">req len</th>
                    <th>return code</th>
                    <th>return status</th>
                    <th title="Time-to-First-Byte">ttfb</th>
                    <th>elapsed time</th>
                    <th title="response body length">resp len</th>
                </tr>
                </thead>
                <tbody>
                <tr data-th-each="record : ${wsSummary.records}">
                    <th:block data-th-each="cell : ${record}"><td data-th-utext="${cell}">data</td></th:block>
                </tr>
                </tbody>
            </table>
        </div>

        <div class="wsDetail-filter">
            <div>
                <span class="filter-selected"> Filter the api results</span>
            </div>
            </br>
            <div class="filter-selected">
                <label>Methods</label>
                <input class="filter-display filter-display-width" id="methodName" value="All" disabled/>
                <label>Return Codes</label>
                <span class="meta-title">2xx</span>
                <input class="filter-display" id="selected-2xx" value="All" disabled/>
                <span class="meta-title">3xx</span>
                <input class="filter-display" id="selected-3xx" value="All" disabled/>
                <span class="meta-title">4xx</span>
                <input class="filter-display" id="selected-4xx" value="All" disabled/>
                <span class="meta-title">5xx</span>
                <input class="filter-display" id="selected-5xx" value="All" disabled/>
            </div>

            <div class="dropdown margin-left-10">
                <button class="dropbtn dropbtn-method">Method</button>
                <div id="myDropdown" class="wsDetail-filter-method dropdown-content">
                    <span onClick="toggleWsDisplay(this)" class="method-dropBTN wsDetail-filter-button method-GET">GET</span>
                    <span onClick="toggleWsDisplay(this)" class="method-dropBTN wsDetail-filter-button method-POST">POST</span>
                    <span onClick="toggleWsDisplay(this)" class="method-dropBTN wsDetail-filter-button method-PATCH">PATCH</span>
                    <span onClick="toggleWsDisplay(this)" class="method-dropBTN wsDetail-filter-button method-PUT">PUT</span>
                    <span onClick="toggleWsDisplay(this)" class="method-dropBTN wsDetail-filter-button method-DELETE">DELETE</span>
                    <span onClick="toggleWsDisplay(this)" class="method-dropBTN wsDetail-filter-button method-HEAD">HEAD</span>
                </div>
            </div>

            <div class="dropdown">
                <button onclick="toggleReturnCodeGroup(this)" class="dropbtn dropbtn-2XX">2xx</button>
                <div id="myDropdown1" class="wsDetail-filter-returnCode dropdown-content">
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-200 2xx">200</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-200 2xx">201</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-200 2xx">202</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-200 2xx">204</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-200 2xx">207</span>
                </div>
            </div>
            <div class="dropdown">
                <button onclick="toggleReturnCodeGroup(this)" class="dropbtn dropbtn-3XX">3xx</button>
                <div id="myDropdown2" class="wsDetail-filter-returnCode dropdown-content">
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-301 3xx">301</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-302 3xx">302</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-303 3xx">303</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-304 3xx">304</span>
                </div>
            </div>
            <div class="dropdown">
                <button onclick="toggleReturnCodeGroup(this)" class="dropbtn dropbtn-4XX">4xx</button>
                <div id="myDropdown3" class="wsDetail-filter-returnCode dropdown-content">
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-400 4xx">400</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-400 4xx">401</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-400 4xx">402</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-400 4xx">403</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-400 4xx">404</span>
                </div>
            </div>
            <div class="dropdown">
                <button onclick="toggleReturnCodeGroup(this)" class="dropbtn dropbtn-5XX">5xx</button>
                <div id="myDropdown4" class="wsDetail-filter-returnCode dropdown-content">
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-500 5xx">500</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-501 5xx">501</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-502 5xx">502</span>
                    <span onClick="toggleWsDisplay(this)" class="wsDetail-filter-button returnCode-503 5xx">503</span>
                </div>
            </div>

            <button onclick="selectAll()" class="dropbtn selectAll">Select All</button>
            <button onclick="clearAll()" class="dropbtn clearAll">Clear All</button>
        </div>

        <th:block data-th-if="${wsLogs.details}" data-th-each="wsDetail : ${wsLogs.details}">
            <div class="container wsDetail" data-th-attrappend="class=${' wsMethod-' + wsDetail.method + ' wsReturn-' + wsDetail.returnCode}">
                <div class="caption">
                    <div class="caption-title">
                        <span data-th-class="${'method method-' + wsDetail.method}" data-th-utext="${wsDetail.method}"></span>
                        <span class="url" data-th-title="${wsDetail.url}" data-th-utext="${wsDetail.url}"></span>
                        <span data-th-class="${'returnCode returnCode-' + wsDetail.returnCode}" data-th-utext="${wsDetail.returnCode}"></span>
                    </div>
                    <div class="caption-meta">
                        <span class="meta-title">script</span>
                        <span class="meta-value" data-th-alt-title="${wsDetail.script}" data-th-utext="${wsDetail.script}">EmployeesTemp</span><br/>

                        <span class="meta-title">scenario</span>
                        <span class="meta-value" data-th-alt-title="${wsDetail.scenario}" data-th-utext="${wsDetail.scenario}">login</span><br/>

                        <span class="meta-title">iteration</span>
                        <span class="meta-value" data-th-utext="${wsDetail.iteration}">001</span><br/>

                        <th:block data-th-if="${wsDetail.repeatUntil == ''}">
                            <span class="meta-title">row</span>
                            <span class="meta-value" data-th-utext="${wsDetail.row}">A5</span><br/>
                        </th:block>
                        <th:block data-th-if="${wsDetail.repeatUntil != ''}">
                            <span class="meta-title">row</span>
                            <span class="meta-value meta-value-half" data-th-utext="${wsDetail.row}">A5</span>
                            <span class="meta-title">repeat-until</span>
                            <span class="meta-value meta-value-half" data-th-utext="${wsDetail.repeatUntil}">001</span><br/>
                        </th:block>

                        <a class="link-to-result link" data-th-href="${'javascript:scrollToElement(\'[id=\\\'' + wsDetail.invokeFrom + '.xlsx\\\']\');'}" title="navigate to corresponding execution result"><i class="fas fa-stream"></i></a>
                        <a data-th-href="${wsDetail.file.name}" class="link" target="_blank" title="click here to download request/response log"><i class="fas fa-file-download"></i></a>
                        <a data-th-href="${'javascript:viewLog(\'[id=\\\'' + wsDetail.file.name + '\\\']\');'}" class="link" title="click here to view request/response log"><i class="fas fa-book-reader"></i></a>
                    </div>
                </div>
                <textarea class="wsDetail-content" data-th-id="${wsDetail.file.name}" data-th-utext="${wsDetail.content}"></textarea>
            </div>
        </th:block>
    </div>
</div>

<th:block data-th-if="${summary.customFooter}">
    <div class="custom-footer" data-th-utext="${summary.customFooter}">
        Special <a href="https://nexiality.github.io/documentation/">data file</a>.<br/>
        The number of transaction completed is <b>15</b>
    </div>
</th:block>

<br/>
<br/>
<br/>
<br/>
<div class="footer">powered by <a href="https://nexiality.github.io">NEXIAL</a></div>
<br/>
<br/>

<button id="hideLog" target="" title="click to hide display" onclick="hideLog();">Hide</button>

<div id="loadError" style="display:none;font-weight:bold;font-size:16pt;color:#800;background:rgba(230,200,200,0.9);border:5px solid;padding:25px;margin:auto;position:fixed;width:500px;height:175px;top:0;left:0;right:0;bottom:0;">
    Unable to load one or more external web resources needed to display this page.<br/><br/>
    Please check/adjust your Internet access and reload this page again.<br/><br/>
    Thank you.
</div>

<script>if (loadErrorFound) { document.getElementById('loadError').style.display = 'block'; }</script>
<script th:inline="javascript">
   const executionChart = new ExecutionChart([[${summary}]]);
   executionChart.initializeChart();
</script>

<th:block data-th-if="${wsLogs}">
    <link rel="stylesheet" href="https://nexiality.github.io/documentation/assets/project/datatables.min.css" onerror="externalResourceNotFound()"/>
    <script src="https://nexiality.github.io/documentation/assets/project/datatables.min.js" onerror="externalResourceNotFound()"></script>
    <script>
      $(document).ready(function () {
        $('#wsSummaryTable').DataTable(
          {
            lengthMenu: [ 10, 50, 100, "All" ],
            fixedHeader: true,
            columnDefs: [
              {targets: [0, 1, 2], className: 'dt-body-nowrap'},
              {targets: [4], className: 'dt-body-nowrap wsSummary-url'},
              {targets: [7, 8], className: 'dt-body-center'},
              {targets: [3, 6, 9, 10, 11], className: 'dt-body-right'}
            ]
          }
        );
      });
    </script>
</th:block>
</body>
</html>